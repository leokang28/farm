const base = '/';

const brandSvg = `<svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="30" viewBox="0, 0, 400,133.9794754846066"><g id="svgg"><path id="path0" d="M91.583 16.348 C 90.850 16.429,89.950 16.523,89.583 16.558 C 89.217 16.592,88.542 16.711,88.083 16.822 C 87.625 16.933,86.612 17.177,85.833 17.365 C 84.155 17.769,81.381 18.668,79.944 19.275 C 77.390 20.352,76.578 20.365,75.134 19.356 C 73.206 18.008,70.487 17.517,68.583 18.173 C 68.217 18.299,67.879 18.412,67.833 18.424 C 66.045 18.886,62.842 21.327,62.562 22.442 C 62.375 23.188,63.156 24.549,63.733 24.482 C 67.070 24.093,68.569 24.639,69.066 26.424 C 69.453 27.808,70.476 31.015,70.660 31.417 C 70.744 31.600,71.048 32.462,71.335 33.333 C 71.622 34.204,71.927 35.047,72.012 35.206 C 72.097 35.365,72.167 35.611,72.167 35.753 C 72.167 35.895,72.333 36.072,72.537 36.148 L 72.907 36.285 72.537 36.516 C 72.333 36.643,72.167 36.804,72.167 36.875 C 72.167 36.945,71.947 37.233,71.679 37.513 C 68.968 40.350,69.566 42.249,73.122 42.095 C 77.095 41.923,80.472 39.142,81.331 35.333 C 81.543 34.393,81.845 33.778,82.316 33.327 C 82.568 33.086,84.694 32.000,84.914 32.000 C 84.970 32.000,85.733 31.663,86.610 31.250 C 87.487 30.838,88.224 30.500,88.248 30.500 C 88.407 30.500,91.686 28.550,92.595 27.914 C 95.460 25.912,98.193 23.308,99.679 21.167 C 101.179 19.004,99.424 16.692,96.083 16.431 C 93.306 16.214,92.882 16.206,91.583 16.348 M89.711 21.042 C 92.266 22.470,91.438 26.667,88.600 26.667 C 85.611 26.667,84.329 23.036,86.720 21.342 C 87.497 20.791,88.994 20.641,89.711 21.042 M60.083 29.116 C 58.467 29.328,54.312 31.276,53.794 32.064 C 53.727 32.166,53.671 32.194,53.669 32.127 C 53.668 32.059,53.508 32.134,53.314 32.293 C 50.625 34.503,48.843 36.455,46.517 39.736 C 45.465 41.220,45.226 41.605,44.285 43.333 C 44.011 43.837,43.698 44.362,43.590 44.500 C 42.868 45.418,40.386 51.836,40.062 53.621 C 40.018 53.862,39.948 54.115,39.907 54.183 C 39.836 54.298,39.667 55.248,39.168 58.340 C 38.958 59.640,39.021 67.311,39.248 68.177 C 39.386 68.701,40.257 69.101,40.571 68.784 C 41.380 67.971,42.039 65.742,42.330 62.833 C 42.594 60.198,42.910 57.924,43.101 57.293 C 43.149 57.133,43.226 56.796,43.271 56.543 C 43.481 55.382,44.324 52.444,44.789 51.250 C 45.241 50.090,45.361 49.750,45.317 49.750 C 45.211 49.750,47.716 45.075,47.847 45.028 C 47.931 44.997,48.000 44.898,48.000 44.808 C 48.000 44.624,48.943 43.177,49.232 42.917 C 49.333 42.825,49.731 42.328,50.114 41.813 C 51.419 40.061,54.350 37.325,55.808 36.500 C 56.051 36.362,56.288 36.211,56.333 36.163 C 56.379 36.115,56.642 35.928,56.917 35.748 C 58.940 34.423,61.461 33.223,65.374 31.720 C 67.769 30.801,63.447 28.673,60.083 29.116 M66.316 36.573 C 66.275 36.613,66.057 36.684,65.830 36.730 C 62.672 37.371,58.714 40.395,55.655 44.503 C 54.362 46.240,53.736 47.341,52.576 49.917 C 52.008 51.177,51.214 54.392,51.361 54.834 C 51.398 54.943,51.670 54.556,51.967 53.974 C 53.018 51.912,55.094 48.434,55.548 47.972 C 55.668 47.850,56.071 47.337,56.442 46.833 C 57.527 45.363,59.323 43.359,60.925 41.833 C 61.743 41.054,62.451 40.373,62.498 40.320 C 62.571 40.237,63.696 39.301,66.432 37.047 C 66.978 36.597,67.027 36.510,66.736 36.505 C 66.545 36.502,66.356 36.533,66.316 36.573 M87.767 46.281 C 86.839 46.433,85.432 47.552,84.250 49.080 C 83.975 49.435,83.675 49.808,83.583 49.910 C 83.277 50.248,82.817 51.072,82.230 52.333 C 81.910 53.021,81.465 53.959,81.241 54.419 C 81.017 54.879,80.833 55.348,80.833 55.463 C 80.833 55.577,80.760 55.801,80.670 55.961 C 80.581 56.120,80.274 56.887,79.989 57.667 C 78.847 60.790,78.871 60.760,77.787 60.348 C 77.567 60.264,77.168 60.160,76.901 60.117 C 74.830 59.782,71.462 58.102,69.906 56.628 C 67.872 54.700,65.971 54.616,64.401 56.385 C 64.059 56.769,63.017 57.908,62.085 58.917 C 61.153 59.925,60.096 61.087,59.737 61.499 C 59.377 61.911,58.774 62.586,58.396 62.999 C 58.018 63.412,57.531 63.949,57.313 64.193 C 55.630 66.073,54.910 66.902,54.867 67.007 C 54.840 67.075,55.515 67.180,56.367 67.240 C 57.219 67.301,58.817 67.418,59.917 67.501 C 61.017 67.584,62.872 67.698,64.040 67.755 L 66.163 67.859 66.067 67.304 C 66.015 66.999,65.903 66.533,65.819 66.267 C 65.419 64.998,65.702 63.655,66.500 63.041 C 68.072 61.831,69.333 62.517,69.333 64.582 C 69.333 65.300,69.665 65.487,70.667 65.336 C 74.125 64.814,74.383 64.952,73.197 66.696 C 72.433 67.820,71.000 69.396,71.000 69.113 C 71.000 69.047,70.831 69.099,70.625 69.229 C 70.419 69.359,69.462 69.551,68.500 69.656 C 67.537 69.761,66.094 69.919,65.292 70.007 C 61.153 70.460,60.114 70.587,57.250 70.993 C 56.608 71.084,55.857 71.188,55.581 71.225 C 55.084 71.291,53.788 71.536,52.333 71.838 C 51.921 71.924,51.396 72.028,51.167 72.071 C 49.981 72.289,47.559 73.126,46.003 73.854 C 44.665 74.480,42.500 75.806,42.500 76.000 C 42.500 76.280,44.288 76.352,46.583 76.163 C 52.077 75.712,61.171 75.859,63.189 76.433 C 63.339 76.475,64.051 76.581,64.772 76.667 C 66.144 76.832,66.596 76.904,67.833 77.158 C 69.711 77.544,69.565 77.512,71.667 77.981 C 72.079 78.074,72.904 78.304,73.500 78.494 C 74.096 78.683,74.883 78.920,75.250 79.019 C 76.279 79.299,77.770 79.810,79.417 80.448 C 81.730 81.345,82.321 81.594,85.031 82.814 C 86.905 83.657,89.196 83.995,90.751 83.656 C 91.300 83.536,91.797 83.449,91.854 83.462 C 91.912 83.476,92.362 83.335,92.854 83.150 C 93.794 82.797,96.561 81.896,97.417 81.664 C 97.692 81.590,98.667 81.325,99.583 81.075 C 100.500 80.826,101.513 80.565,101.833 80.496 C 104.072 80.012,106.153 79.648,107.579 79.490 C 108.494 79.389,109.292 79.276,109.353 79.238 C 109.415 79.200,110.729 79.123,112.274 79.067 C 113.819 79.011,115.346 78.911,115.667 78.845 L 116.250 78.725 115.417 78.340 C 113.705 77.550,112.566 77.052,112.000 76.846 C 111.679 76.729,111.267 76.573,111.083 76.500 C 110.356 76.210,109.575 75.923,109.417 75.887 C 109.325 75.867,108.912 75.725,108.500 75.571 C 108.087 75.418,107.506 75.227,107.208 75.146 C 106.910 75.066,106.385 74.920,106.042 74.822 C 104.764 74.459,103.268 74.105,101.583 73.767 C 99.702 73.390,99.742 73.397,98.083 73.161 C 95.506 72.794,94.840 72.203,95.200 70.601 C 95.393 69.742,95.276 69.780,96.514 70.169 C 97.102 70.354,97.883 70.589,98.250 70.692 C 99.896 71.153,102.205 71.848,103.750 72.349 C 104.800 72.689,105.259 72.728,108.333 72.740 C 111.187 72.751,111.887 72.803,112.583 73.055 C 113.617 73.429,116.245 74.459,116.917 74.754 C 117.192 74.874,117.997 75.203,118.707 75.484 C 119.417 75.766,120.355 76.178,120.791 76.401 C 121.499 76.763,122.151 77.068,124.833 78.292 C 126.139 78.887,125.975 78.516,123.918 76.226 C 121.915 73.997,119.795 71.954,118.413 70.922 C 118.048 70.649,117.675 70.365,117.583 70.289 C 117.096 69.887,114.848 68.333,114.754 68.333 C 114.693 68.333,114.330 68.119,113.947 67.858 C 113.564 67.596,112.249 66.886,111.026 66.279 C 108.434 64.992,107.815 64.425,107.089 62.674 C 106.817 62.018,106.499 61.401,106.381 61.304 C 106.263 61.206,106.167 61.039,106.167 60.932 C 106.167 60.599,105.220 60.147,104.763 60.262 C 104.533 60.319,103.642 61.059,102.783 61.905 C 99.742 64.902,98.572 65.077,97.263 62.730 C 96.959 62.184,96.711 61.779,96.292 61.142 C 96.122 60.884,96.000 60.383,96.000 59.943 C 96.000 59.528,95.931 59.007,95.847 58.786 C 95.763 58.565,95.655 58.054,95.607 57.650 C 95.492 56.677,95.235 55.457,94.909 54.333 C 94.763 53.829,94.586 53.191,94.515 52.914 C 94.234 51.817,93.394 50.109,92.431 48.676 C 91.220 46.875,89.510 45.997,87.767 46.281 M83.052 65.431 C 83.023 65.722,81.909 68.697,81.264 70.204 C 80.851 71.172,80.258 71.395,77.899 71.469 C 75.223 71.554,75.085 71.188,77.224 69.677 C 77.410 69.545,77.686 69.320,77.835 69.177 C 78.549 68.495,79.493 67.667,79.555 67.667 C 79.593 67.667,79.953 67.360,80.354 66.985 C 82.292 65.173,83.125 64.693,83.052 65.431 M47.750 80.115 C 45.138 80.259,42.067 80.538,41.961 80.641 C 41.852 80.748,42.482 82.472,43.353 84.452 C 43.523 84.838,43.682 85.251,43.706 85.369 C 43.730 85.487,43.789 85.621,43.837 85.667 C 43.884 85.712,44.352 86.622,44.876 87.688 C 45.400 88.755,46.095 90.030,46.420 90.522 C 46.745 91.014,47.102 91.558,47.214 91.731 C 47.745 92.553,48.901 94.089,49.026 94.139 C 49.103 94.169,49.167 94.264,49.167 94.349 C 49.167 94.634,52.122 97.748,53.681 99.105 C 54.591 99.897,57.144 101.711,58.109 102.252 L 58.967 102.733 59.882 102.027 C 60.385 101.639,61.014 101.117,61.279 100.869 C 61.545 100.620,62.208 100.042,62.752 99.583 C 63.297 99.125,63.862 98.638,64.007 98.500 C 64.152 98.362,64.637 97.950,65.085 97.583 C 65.533 97.217,66.091 96.740,66.325 96.524 C 66.559 96.308,67.462 95.598,68.333 94.947 C 69.204 94.296,69.954 93.717,70.000 93.659 C 70.046 93.602,70.571 93.245,71.167 92.867 C 71.762 92.488,72.325 92.120,72.417 92.048 C 72.810 91.739,74.662 90.560,75.583 90.032 C 76.133 89.717,76.846 89.308,77.167 89.123 C 77.487 88.938,78.087 88.598,78.500 88.368 C 78.912 88.138,79.296 87.879,79.352 87.794 C 79.408 87.708,79.483 87.656,79.519 87.679 C 79.632 87.750,82.333 86.127,82.333 85.988 C 82.333 85.829,80.715 85.046,79.083 84.416 C 74.308 82.571,69.158 81.282,64.122 80.671 C 63.409 80.584,62.584 80.472,62.288 80.420 C 61.992 80.369,61.337 80.291,60.833 80.246 C 59.789 80.154,49.015 80.046,47.750 80.115 M117.833 83.684 C 112.664 83.777,110.272 83.928,107.500 84.337 C 106.904 84.424,106.112 84.529,105.740 84.568 C 105.368 84.608,104.618 84.724,104.073 84.826 C 102.913 85.044,99.010 85.818,98.167 85.997 C 96.844 86.278,94.281 87.025,92.167 87.745 C 90.929 88.166,89.804 88.538,89.667 88.572 C 89.323 88.657,85.658 90.187,84.333 90.799 C 83.737 91.074,83.194 91.308,83.126 91.318 C 83.058 91.329,82.739 91.486,82.417 91.666 C 81.185 92.359,80.078 92.899,79.958 92.867 C 79.890 92.848,79.833 92.908,79.833 93.000 C 79.833 93.092,79.738 93.167,79.622 93.167 C 79.506 93.167,79.131 93.357,78.789 93.589 C 78.447 93.822,78.164 93.953,78.162 93.881 C 78.159 93.809,78.080 93.881,77.987 94.042 C 77.893 94.202,77.747 94.333,77.661 94.333 C 77.442 94.333,75.262 95.677,75.194 95.854 C 75.164 95.934,75.048 96.000,74.937 96.000 C 74.825 96.000,74.588 96.115,74.409 96.256 C 74.230 96.398,73.371 97.012,72.500 97.621 C 71.629 98.231,70.892 98.790,70.861 98.865 C 70.831 98.939,70.706 99.000,70.583 99.000 C 70.461 99.000,70.336 99.063,70.306 99.140 C 70.275 99.218,69.612 99.787,68.833 100.405 C 67.379 101.560,65.619 103.093,64.007 104.610 L 63.093 105.471 63.505 105.813 C 63.731 106.001,64.004 106.158,64.111 106.161 C 64.218 106.164,64.331 106.227,64.361 106.301 C 64.568 106.803,66.899 107.871,68.608 108.247 C 68.778 108.285,69.592 108.513,70.417 108.754 C 71.242 108.996,72.179 109.257,72.500 109.335 C 73.568 109.596,74.246 109.792,74.691 109.970 C 74.934 110.066,75.171 110.107,75.217 110.060 C 75.264 110.014,75.534 110.095,75.818 110.242 C 76.101 110.389,76.333 110.473,76.333 110.430 C 76.333 110.387,76.716 110.465,77.184 110.604 C 79.068 111.163,80.125 110.845,81.516 109.299 C 83.197 107.429,86.960 103.686,88.351 102.499 C 90.207 100.914,90.316 100.826,91.498 99.947 C 92.092 99.504,92.617 99.086,92.664 99.018 C 92.746 98.901,94.367 97.774,94.969 97.416 C 95.124 97.325,95.796 96.893,96.464 96.458 C 97.131 96.023,97.710 95.667,97.750 95.667 C 97.790 95.667,98.444 95.301,99.203 94.855 C 100.662 93.997,104.382 92.154,104.773 92.097 C 104.900 92.079,105.093 91.974,105.202 91.865 C 105.311 91.756,105.487 91.667,105.594 91.667 C 105.766 91.667,106.958 91.232,107.917 90.821 C 108.379 90.623,110.472 89.970,110.581 89.990 C 110.630 89.999,110.876 89.901,111.127 89.773 C 111.583 89.539,116.827 88.187,117.726 88.072 C 117.987 88.039,118.325 87.973,118.476 87.926 C 118.627 87.878,119.013 87.805,119.333 87.762 C 125.673 86.919,125.902 86.810,126.251 84.471 L 126.367 83.692 124.892 83.638 C 124.081 83.608,120.904 83.629,117.833 83.684 M120.750 91.180 C 120.475 91.263,119.914 91.378,119.503 91.434 C 119.092 91.491,117.742 91.797,116.503 92.115 C 113.539 92.874,113.468 92.894,111.917 93.411 C 111.183 93.656,110.508 93.876,110.417 93.900 C 110.325 93.925,110.025 94.040,109.750 94.158 C 109.475 94.275,108.875 94.523,108.417 94.710 C 106.359 95.547,105.585 95.915,102.917 97.326 C 100.486 98.611,95.662 101.837,94.571 102.908 C 94.473 103.004,94.024 103.383,93.574 103.750 C 91.177 105.704,86.167 110.768,86.167 111.238 C 86.167 111.342,86.814 111.313,89.583 111.086 C 91.224 110.952,94.400 110.456,95.417 110.176 C 95.692 110.100,96.367 109.947,96.917 109.835 C 97.467 109.723,98.104 109.573,98.333 109.501 C 98.563 109.430,99.087 109.277,99.500 109.162 C 101.587 108.578,103.307 107.899,106.083 106.564 C 107.699 105.787,110.198 104.337,110.500 104.002 C 110.546 103.951,110.808 103.766,111.083 103.592 C 113.072 102.332,117.613 97.991,119.464 95.579 C 120.267 94.534,121.871 92.239,121.965 92.000 C 122.020 91.862,122.163 91.651,122.282 91.530 C 122.794 91.012,121.945 90.818,120.750 91.180 " stroke="none" fill="#8c1c7c" fill-rule="evenodd"></path><path id="path1" d="M166.495 31.452 C 165.739 31.974,165.667 32.123,165.667 33.148 C 165.667 34.357,166.038 34.831,166.990 34.837 C 167.316 34.839,167.883 34.923,168.250 35.022 C 168.617 35.122,169.104 35.222,169.333 35.246 C 169.714 35.285,170.854 35.443,171.793 35.587 C 172.135 35.640,172.846 36.167,172.575 36.167 C 172.511 36.167,172.554 36.280,172.669 36.420 C 172.908 36.707,172.737 38.524,172.339 39.917 C 172.261 40.192,172.197 40.529,172.198 40.667 C 172.198 40.804,172.077 41.554,171.929 42.333 C 171.780 43.112,171.545 44.462,171.406 45.333 C 171.267 46.204,171.081 47.292,170.993 47.750 C 170.904 48.208,170.720 49.183,170.583 49.917 C 170.445 50.650,170.261 51.550,170.172 51.917 C 170.084 52.283,169.976 52.883,169.932 53.250 C 169.808 54.284,169.676 55.020,169.473 55.796 C 169.371 56.189,169.329 56.551,169.380 56.602 C 169.431 56.653,169.404 56.895,169.319 57.139 C 169.189 57.513,169.030 58.356,168.418 61.917 C 168.387 62.100,168.345 62.250,168.326 62.250 C 168.306 62.250,168.276 62.438,168.259 62.667 C 168.242 62.896,168.146 63.458,168.045 63.917 C 167.944 64.375,167.779 65.275,167.678 65.917 C 167.577 66.558,167.379 67.758,167.238 68.583 C 167.098 69.408,166.915 70.496,166.832 71.000 C 166.749 71.504,166.645 72.104,166.600 72.333 C 166.555 72.563,166.477 73.112,166.427 73.555 C 166.378 73.997,166.288 74.439,166.227 74.537 C 166.167 74.635,166.092 74.948,166.060 75.232 C 166.029 75.517,165.887 76.442,165.744 77.289 C 165.602 78.135,165.331 79.823,165.143 81.039 C 164.616 84.434,164.569 84.672,164.189 85.853 C 163.404 88.292,162.014 89.319,159.250 89.504 C 156.531 89.687,155.961 90.079,155.862 91.833 C 155.816 92.638,155.863 92.984,156.036 93.127 C 156.301 93.348,185.042 93.452,185.930 93.235 C 186.381 93.126,187.214 92.667,186.962 92.667 C 186.901 92.667,186.957 92.413,187.086 92.102 C 187.760 90.491,187.079 89.869,184.342 89.593 C 183.842 89.543,183.303 89.460,183.142 89.409 C 182.982 89.358,182.528 89.292,182.134 89.262 C 181.739 89.232,180.892 89.122,180.250 89.018 C 179.164 88.841,178.291 88.730,177.648 88.685 C 177.426 88.670,177.403 88.558,177.515 88.042 C 177.634 87.494,178.029 85.210,178.258 83.750 C 178.302 83.475,178.381 83.063,178.435 82.833 C 178.553 82.328,178.573 82.209,178.918 80.000 C 179.069 79.037,179.235 78.137,179.288 78.000 C 179.340 77.862,179.402 77.600,179.424 77.417 C 179.446 77.233,179.591 76.446,179.747 75.667 C 179.902 74.887,180.053 74.004,180.081 73.704 C 180.110 73.403,180.183 72.956,180.245 72.709 C 180.307 72.463,180.390 72.007,180.430 71.696 C 180.470 71.385,180.539 71.072,180.583 71.001 C 180.660 70.876,180.974 69.061,181.081 68.120 C 181.110 67.865,181.216 67.558,181.316 67.438 C 181.415 67.318,181.442 67.158,181.374 67.083 C 181.306 67.008,181.344 67.001,181.458 67.066 C 181.573 67.132,181.667 67.123,181.667 67.046 C 181.667 66.361,182.485 66.276,189.838 66.198 C 199.190 66.099,198.335 65.653,198.385 70.654 C 198.412 73.278,198.455 73.750,198.667 73.755 C 198.804 73.758,199.254 73.828,199.667 73.912 C 201.908 74.363,202.824 73.638,202.832 71.403 C 202.833 71.120,202.885 70.837,202.949 70.773 C 203.012 70.710,203.087 70.491,203.116 70.287 C 203.144 70.083,203.245 69.542,203.341 69.083 C 203.437 68.625,203.557 67.987,203.609 67.667 C 203.661 67.346,203.809 66.446,203.938 65.667 C 204.067 64.887,204.205 63.968,204.244 63.624 C 204.283 63.279,204.356 62.932,204.406 62.851 C 204.455 62.771,204.575 62.190,204.671 61.561 C 204.767 60.932,204.920 59.967,205.012 59.417 C 205.104 58.867,205.218 58.117,205.265 57.750 C 205.312 57.383,205.419 56.821,205.504 56.500 C 205.588 56.179,205.697 55.579,205.746 55.167 C 205.796 54.754,205.868 54.251,205.907 54.049 C 205.982 53.660,205.873 53.594,204.833 53.407 C 203.023 53.080,201.500 53.707,201.500 54.780 C 201.500 54.904,201.433 55.135,201.351 55.294 C 201.198 55.591,200.792 56.518,200.750 56.667 C 200.079 59.011,199.743 59.762,199.053 60.458 L 198.517 61.000 190.611 61.000 L 182.706 61.000 182.611 60.640 C 182.560 60.442,182.624 59.673,182.755 58.931 C 182.885 58.190,183.065 57.133,183.155 56.583 C 183.386 55.155,183.811 52.725,183.999 51.750 C 184.088 51.292,184.357 49.717,184.598 48.250 C 184.839 46.783,185.067 45.396,185.106 45.167 C 185.201 44.599,185.780 41.516,185.889 41.000 C 185.937 40.771,186.059 40.031,186.159 39.356 C 186.260 38.680,186.418 37.987,186.510 37.814 C 186.603 37.641,186.628 37.500,186.567 37.500 C 186.505 37.500,186.709 37.272,187.019 36.993 L 187.583 36.487 198.250 36.537 C 207.852 36.581,208.968 36.614,209.429 36.866 C 210.444 37.419,210.416 37.242,210.428 43.023 C 210.435 45.941,210.477 48.366,210.522 48.411 C 210.567 48.456,211.107 48.311,211.722 48.088 C 212.336 47.865,212.856 47.691,212.878 47.701 C 212.899 47.712,213.205 47.625,213.558 47.508 C 214.460 47.211,214.699 46.565,215.408 42.500 C 215.464 42.179,215.551 41.729,215.603 41.500 C 215.738 40.895,215.997 39.401,216.167 38.250 C 216.248 37.700,216.394 36.800,216.493 36.250 C 216.592 35.700,216.715 34.987,216.768 34.667 C 216.820 34.346,216.934 33.746,217.021 33.333 C 217.108 32.921,217.223 32.265,217.278 31.875 L 217.377 31.167 192.142 31.167 C 168.611 31.167,166.880 31.186,166.495 31.452 M243.833 48.923 C 241.058 49.227,237.623 50.108,236.875 50.707 C 236.760 50.799,236.666 50.809,236.664 50.729 C 236.663 50.649,236.606 50.658,236.539 50.750 C 236.472 50.842,235.906 51.179,235.281 51.500 C 233.587 52.371,233.173 52.609,232.850 52.901 C 232.689 53.047,232.507 53.167,232.446 53.167 C 232.343 53.167,231.723 53.659,231.240 54.125 C 231.121 54.240,230.939 54.333,230.835 54.333 C 230.732 54.333,230.687 54.397,230.735 54.476 C 230.783 54.554,230.653 54.695,230.445 54.790 C 229.461 55.238,224.500 61.346,224.500 62.109 C 224.500 62.217,224.441 62.331,224.369 62.361 C 224.298 62.392,223.841 63.242,223.356 64.250 C 222.141 66.772,222.168 66.710,222.087 67.083 C 222.046 67.267,221.891 67.754,221.741 68.167 C 221.591 68.579,221.444 69.029,221.414 69.167 C 221.383 69.304,221.231 69.904,221.075 70.500 C 220.920 71.096,220.770 71.696,220.742 71.833 C 220.715 71.971,220.678 72.121,220.660 72.167 C 220.642 72.212,220.637 72.309,220.649 72.381 C 220.661 72.454,220.561 72.988,220.426 73.569 C 219.716 76.630,220.298 83.850,221.502 86.917 C 221.574 87.100,221.731 87.513,221.852 87.833 C 222.278 88.970,225.076 92.500,225.551 92.500 C 225.607 92.500,226.049 92.734,226.534 93.020 C 227.020 93.306,227.417 93.524,227.417 93.505 C 227.417 93.485,227.604 93.541,227.833 93.629 C 229.426 94.238,229.852 94.301,232.326 94.297 C 234.921 94.293,235.726 94.160,237.290 93.476 C 237.678 93.306,238.110 93.167,238.248 93.167 C 238.387 93.167,238.500 93.099,238.500 93.016 C 238.500 92.934,238.706 92.786,238.958 92.688 C 240.266 92.180,242.115 90.751,244.876 88.114 C 245.488 87.530,245.423 87.401,245.651 89.667 C 245.756 90.721,245.888 91.940,245.943 92.375 L 246.043 93.167 253.768 93.167 L 261.492 93.167 261.771 92.741 C 262.587 91.495,261.594 90.008,259.938 89.996 C 258.191 89.984,257.084 88.568,257.492 86.866 C 257.596 86.433,257.710 85.855,257.745 85.581 C 257.781 85.307,257.891 84.726,257.990 84.289 C 258.089 83.851,258.212 83.214,258.264 82.872 C 258.316 82.530,258.429 81.930,258.514 81.539 C 258.600 81.147,258.709 80.547,258.756 80.205 C 258.804 79.863,258.877 79.426,258.919 79.233 C 258.960 79.040,259.035 78.590,259.085 78.233 C 259.135 77.876,259.210 77.426,259.252 77.233 C 259.293 77.040,259.369 76.590,259.420 76.233 C 259.471 75.876,259.589 75.208,259.683 74.750 C 259.831 74.030,260.300 71.363,260.606 69.500 C 260.659 69.179,260.886 67.904,261.111 66.667 C 261.472 64.681,261.840 62.484,262.114 60.667 C 262.163 60.346,262.257 59.971,262.323 59.833 C 262.390 59.696,262.458 59.318,262.475 58.993 C 262.492 58.668,262.547 58.218,262.597 57.993 C 262.647 57.768,262.717 57.339,262.752 57.039 C 262.787 56.740,262.856 56.431,262.905 56.352 C 262.954 56.273,263.036 55.843,263.088 55.396 C 263.140 54.949,263.218 54.396,263.261 54.167 C 263.304 53.938,263.490 52.887,263.673 51.833 C 263.856 50.779,264.046 49.791,264.094 49.638 C 264.357 48.796,264.325 48.667,263.854 48.667 C 262.599 48.667,261.018 49.116,259.583 49.881 C 259.166 50.103,256.421 50.169,255.750 49.972 C 253.796 49.400,248.096 48.622,246.346 48.689 C 246.018 48.702,244.887 48.807,243.833 48.923 M337.500 48.933 C 335.222 49.227,334.654 49.326,334.250 49.500 C 334.067 49.579,333.617 49.736,333.251 49.848 C 332.176 50.179,329.908 51.471,329.337 52.079 C 329.120 52.311,328.885 52.500,328.816 52.500 C 328.651 52.500,326.777 54.402,326.108 55.248 C 323.939 57.994,323.833 57.908,323.833 53.396 L 323.833 50.000 316.739 50.000 C 311.689 50.000,309.540 50.056,309.281 50.193 C 307.642 51.061,308.103 53.497,309.906 53.499 C 310.480 53.500,311.873 54.134,311.748 54.337 C 311.700 54.414,311.721 54.514,311.794 54.559 C 312.062 54.725,311.760 57.702,311.334 59.083 C 311.250 59.358,311.150 59.883,311.113 60.250 C 311.076 60.617,311.002 61.029,310.949 61.167 C 310.897 61.304,310.817 61.717,310.772 62.083 C 310.728 62.450,310.610 63.200,310.510 63.750 C 310.410 64.300,310.286 65.012,310.236 65.333 C 310.185 65.654,310.045 66.306,309.924 66.782 C 309.802 67.258,309.737 67.682,309.779 67.724 C 309.821 67.765,309.767 68.126,309.659 68.525 C 309.551 68.924,309.443 69.438,309.420 69.667 C 309.396 69.896,309.250 70.758,309.096 71.583 C 308.789 73.218,308.546 74.589,308.402 75.500 C 308.351 75.821,308.200 76.683,308.066 77.417 C 307.397 81.069,307.207 82.260,307.274 82.372 C 307.315 82.438,307.272 82.636,307.179 82.811 C 307.085 82.986,306.968 83.456,306.918 83.856 C 306.868 84.256,306.793 84.696,306.751 84.833 C 306.646 85.174,306.332 87.256,306.254 88.121 C 306.220 88.508,306.152 88.889,306.103 88.967 C 306.055 89.046,305.969 89.591,305.911 90.180 C 305.853 90.768,305.738 91.513,305.654 91.833 C 305.570 92.154,305.501 92.585,305.501 92.792 L 305.500 93.167 311.561 93.167 L 317.622 93.167 317.986 91.208 C 318.186 90.131,318.422 88.912,318.510 88.500 C 318.597 88.087,318.703 87.487,318.745 87.167 C 318.787 86.846,318.868 86.396,318.924 86.167 C 318.980 85.938,319.052 85.575,319.083 85.360 C 319.115 85.146,319.215 84.621,319.306 84.193 C 319.397 83.766,319.561 82.854,319.670 82.167 C 319.778 81.479,319.935 80.699,320.017 80.433 C 320.099 80.168,320.167 79.700,320.167 79.394 C 320.167 79.088,320.237 78.518,320.324 78.127 C 320.781 76.059,320.855 75.650,320.928 74.763 C 320.972 74.231,321.079 73.664,321.166 73.502 C 321.252 73.340,321.320 72.992,321.317 72.729 C 321.313 72.465,321.504 71.275,321.742 70.083 C 321.979 68.892,322.209 67.729,322.252 67.500 C 322.295 67.271,322.562 66.446,322.846 65.667 C 323.130 64.887,323.380 64.155,323.400 64.040 C 323.420 63.924,323.526 63.741,323.635 63.632 C 323.744 63.523,323.833 63.345,323.833 63.237 C 323.833 62.997,324.886 61.229,325.338 60.709 C 325.518 60.502,325.668 60.276,325.672 60.208 C 325.686 59.949,328.111 57.595,328.917 57.058 C 329.192 56.875,329.792 56.469,330.250 56.156 C 330.708 55.842,331.083 55.610,331.083 55.638 C 331.083 55.667,331.294 55.610,331.553 55.512 C 332.926 54.990,334.899 56.179,335.267 57.750 C 335.492 58.711,335.486 61.407,335.257 62.417 C 335.011 63.499,334.731 65.139,334.588 66.333 C 334.511 66.982,334.332 68.055,334.101 69.250 C 334.066 69.433,333.915 70.296,333.767 71.167 C 333.476 72.880,333.459 72.971,333.096 74.833 C 332.963 75.521,332.772 76.608,332.673 77.250 C 332.574 77.892,332.261 79.692,331.977 81.250 C 331.693 82.808,331.439 84.308,331.411 84.583 C 331.355 85.134,331.262 85.672,330.922 87.417 C 330.797 88.058,330.607 89.108,330.499 89.750 C 330.391 90.392,330.235 91.231,330.152 91.615 C 330.068 92.000,330.000 92.506,330.000 92.740 L 330.000 93.167 336.000 93.167 C 342.031 93.167,342.104 93.160,342.020 92.625 C 342.009 92.556,342.067 92.500,342.148 92.500 C 342.286 92.500,342.516 91.685,342.594 90.917 C 342.613 90.733,342.712 90.177,342.815 89.681 C 342.918 89.185,342.966 88.744,342.923 88.701 C 342.880 88.658,342.915 88.491,343.002 88.331 C 343.088 88.170,343.195 87.748,343.240 87.394 C 343.285 87.040,343.467 86.000,343.645 85.083 C 343.962 83.447,344.123 82.493,344.277 81.333 C 344.319 81.012,344.422 80.525,344.504 80.250 C 344.587 79.975,344.688 79.450,344.730 79.083 C 344.771 78.717,344.851 78.229,344.907 78.000 C 344.963 77.771,345.040 77.283,345.079 76.917 C 345.149 76.250,345.280 75.583,345.340 75.583 C 345.357 75.583,345.396 75.358,345.425 75.083 C 345.455 74.808,345.559 74.171,345.655 73.667 C 345.752 73.162,345.985 71.737,346.174 70.500 C 346.363 69.262,346.590 68.074,346.678 67.860 C 346.767 67.645,346.883 67.195,346.936 66.860 C 346.989 66.524,347.109 66.156,347.203 66.042 C 347.297 65.927,347.330 65.833,347.277 65.833 C 346.964 65.833,348.598 62.581,349.824 60.764 C 350.938 59.112,353.986 56.186,354.607 56.171 C 354.712 56.169,354.845 56.043,354.903 55.893 C 354.961 55.742,355.053 55.665,355.109 55.720 C 355.165 55.776,355.367 55.712,355.559 55.577 C 356.613 54.839,358.264 55.582,359.082 57.163 C 359.781 58.515,360.317 61.686,359.947 62.284 C 359.867 62.414,359.493 64.485,359.232 66.250 C 359.191 66.525,358.977 67.762,358.756 69.000 C 358.535 70.237,358.237 71.962,358.094 72.833 C 357.951 73.704,357.746 74.792,357.640 75.250 C 357.534 75.708,357.429 76.233,357.407 76.417 C 357.385 76.600,357.281 77.224,357.174 77.802 C 357.068 78.381,356.948 79.056,356.907 79.302 C 356.866 79.549,356.754 80.162,356.658 80.667 C 356.562 81.171,356.451 81.870,356.410 82.221 C 356.370 82.572,356.301 82.917,356.257 82.989 C 356.213 83.060,356.137 83.448,356.088 83.851 C 355.996 84.604,355.766 85.846,355.474 87.167 C 355.382 87.579,355.276 88.159,355.239 88.455 C 355.201 88.751,355.053 89.651,354.909 90.455 C 354.766 91.259,354.608 92.235,354.557 92.625 L 354.465 93.333 362.274 93.358 C 370.733 93.384,371.160 93.374,371.432 93.152 C 371.532 93.070,371.655 93.044,371.705 93.094 C 372.004 93.393,372.458 92.280,372.438 91.295 L 372.417 90.250 371.583 90.035 C 371.125 89.917,370.337 89.749,369.833 89.663 C 367.667 89.290,367.432 88.822,368.005 86.021 C 368.204 85.047,368.406 84.186,368.453 84.108 C 368.501 84.030,368.602 83.543,368.678 83.025 C 368.754 82.507,368.902 81.671,369.007 81.167 C 369.112 80.662,369.221 80.063,369.249 79.833 C 369.277 79.604,369.422 78.779,369.572 78.000 C 369.722 77.221,369.882 76.321,369.928 76.000 C 369.973 75.679,370.044 75.259,370.085 75.066 C 370.127 74.874,370.202 74.424,370.253 74.066 C 370.304 73.709,370.418 73.054,370.507 72.611 C 370.596 72.168,370.627 71.737,370.575 71.653 C 370.523 71.569,370.564 71.500,370.667 71.500 C 370.769 71.500,370.810 71.430,370.757 71.344 C 370.704 71.258,370.731 70.865,370.817 70.469 C 370.904 70.074,371.019 69.460,371.073 69.106 C 371.127 68.751,371.206 68.404,371.249 68.335 C 371.292 68.265,371.367 67.843,371.416 67.396 C 371.465 66.949,371.573 66.246,371.655 65.833 C 372.604 61.110,372.708 55.792,371.885 54.127 C 371.761 53.876,371.650 53.613,371.638 53.543 C 371.445 52.444,369.141 49.979,368.099 49.757 C 367.999 49.736,367.579 49.570,367.167 49.389 C 365.983 48.869,363.934 48.625,362.481 48.831 C 360.552 49.105,359.264 49.368,359.092 49.524 C 359.005 49.602,358.791 49.667,358.616 49.667 C 356.897 49.667,352.517 52.793,349.417 56.233 C 348.477 57.276,348.215 57.369,348.079 56.708 C 348.027 56.456,347.899 55.950,347.795 55.583 C 347.690 55.217,347.599 54.879,347.592 54.833 C 347.585 54.788,347.494 54.525,347.389 54.250 C 347.284 53.975,347.141 53.600,347.072 53.417 C 347.004 53.233,346.959 53.027,346.974 52.958 C 346.988 52.890,346.929 52.833,346.841 52.833 C 346.754 52.833,346.564 52.583,346.418 52.277 C 345.921 51.229,344.351 49.956,342.833 49.369 C 342.014 49.053,341.565 48.964,339.750 48.763 C 339.475 48.733,338.462 48.809,337.500 48.933 M300.167 48.880 C 300.121 48.923,299.596 49.002,299.000 49.056 C 297.814 49.164,296.700 49.439,296.375 49.704 C 296.260 49.798,296.167 49.826,296.167 49.768 C 296.167 49.502,293.779 50.916,293.030 51.625 C 292.909 51.740,292.745 51.833,292.666 51.833 C 292.472 51.833,289.176 55.111,288.662 55.815 C 288.435 56.126,287.962 56.688,287.611 57.065 L 286.971 57.750 287.076 57.235 C 287.198 56.637,287.467 53.777,287.613 51.517 L 287.715 49.950 279.649 50.042 C 270.820 50.143,271.245 50.102,270.699 50.901 C 269.672 52.406,270.671 53.321,274.000 53.925 C 274.229 53.966,274.567 54.032,274.750 54.071 C 274.933 54.110,275.182 54.147,275.303 54.154 C 275.433 54.161,275.486 54.285,275.432 54.458 C 275.382 54.619,275.297 55.050,275.243 55.417 C 275.189 55.783,275.078 56.346,274.997 56.667 C 274.916 56.987,274.812 57.577,274.765 57.976 C 274.719 58.375,274.610 58.937,274.522 59.226 C 274.435 59.514,274.366 59.862,274.369 60.000 C 274.372 60.137,274.245 60.925,274.087 61.750 C 273.929 62.575,273.767 63.475,273.728 63.750 C 273.689 64.025,273.585 64.625,273.497 65.083 C 273.409 65.542,273.300 66.179,273.256 66.500 C 273.212 66.821,273.133 67.308,273.081 67.583 C 273.029 67.858,272.909 68.533,272.814 69.083 C 272.719 69.633,272.570 70.421,272.483 70.833 C 272.396 71.246,272.295 71.808,272.260 72.083 C 272.225 72.358,272.077 73.258,271.931 74.083 C 271.785 74.908,271.627 75.808,271.580 76.083 C 271.534 76.358,271.426 76.921,271.341 77.333 C 271.164 78.195,270.995 79.195,270.905 79.917 C 270.871 80.192,270.750 80.792,270.637 81.250 C 270.524 81.708,270.448 82.140,270.466 82.210 C 270.485 82.279,270.419 82.692,270.319 83.126 C 270.220 83.561,270.072 84.329,269.991 84.833 C 269.797 86.042,269.694 86.637,269.387 88.333 C 268.969 90.637,268.817 91.544,268.734 92.250 C 268.691 92.617,268.621 93.014,268.580 93.133 C 268.519 93.308,269.630 93.340,274.435 93.300 L 280.365 93.250 280.748 92.770 C 281.110 92.316,281.251 91.847,281.432 90.500 C 281.475 90.179,281.579 89.617,281.663 89.250 C 281.864 88.369,282.196 86.398,282.266 85.667 C 282.297 85.346,282.371 84.896,282.431 84.667 C 282.491 84.438,282.566 84.025,282.598 83.750 C 282.651 83.281,282.833 82.250,283.170 80.500 C 283.249 80.087,283.368 79.375,283.434 78.917 C 283.500 78.458,283.572 78.008,283.593 77.917 C 283.614 77.825,283.682 77.424,283.743 77.025 C 283.804 76.626,283.912 76.138,283.983 75.941 C 284.053 75.744,284.127 75.253,284.147 74.849 C 284.167 74.444,284.245 73.994,284.319 73.849 C 284.394 73.703,284.507 73.171,284.570 72.667 C 284.633 72.162,284.794 71.188,284.927 70.500 C 285.059 69.813,285.254 68.800,285.359 68.250 C 285.464 67.700,285.648 67.053,285.768 66.813 C 285.889 66.572,285.951 66.340,285.907 66.296 C 285.863 66.252,285.941 65.999,286.079 65.733 C 286.218 65.467,286.332 65.156,286.332 65.042 C 286.333 64.927,286.408 64.833,286.500 64.833 C 286.592 64.833,286.667 64.755,286.667 64.660 C 286.667 64.501,287.023 63.949,287.667 63.111 C 288.219 62.390,289.854 60.880,290.450 60.538 C 291.479 59.947,293.256 59.116,293.833 58.955 C 293.879 58.943,294.164 58.847,294.465 58.743 C 296.150 58.164,297.469 59.165,297.902 61.350 C 298.302 63.372,299.115 64.341,300.401 64.328 C 301.379 64.318,301.879 63.316,302.067 60.984 C 302.094 60.654,302.158 60.316,302.210 60.231 C 302.291 60.100,302.474 59.075,302.905 56.333 C 302.955 56.012,303.039 55.450,303.090 55.083 C 303.142 54.717,303.252 54.154,303.335 53.833 C 303.418 53.512,303.528 52.987,303.581 52.667 C 303.633 52.346,303.749 51.676,303.838 51.178 C 304.145 49.463,304.088 49.209,303.375 49.103 C 302.282 48.941,300.253 48.800,300.167 48.880 M247.333 53.621 C 247.654 53.678,247.954 53.731,248.000 53.740 C 248.046 53.748,248.164 53.806,248.262 53.869 C 248.360 53.931,248.638 54.019,248.881 54.063 C 250.462 54.349,250.828 55.793,250.112 58.917 C 249.964 59.558,249.814 60.346,249.778 60.667 C 249.741 60.987,249.670 61.362,249.620 61.500 C 249.569 61.637,249.485 62.087,249.431 62.500 C 249.262 63.805,249.164 64.388,248.922 65.500 C 248.709 66.485,248.578 67.252,248.402 68.542 C 248.368 68.794,248.298 69.206,248.247 69.458 C 248.067 70.349,247.823 71.758,247.736 72.417 C 247.687 72.783,247.611 73.189,247.568 73.318 C 247.526 73.447,247.452 73.897,247.404 74.318 C 247.315 75.113,247.210 75.750,247.168 75.750 C 247.155 75.750,247.111 76.008,247.070 76.323 C 247.029 76.638,246.925 77.163,246.839 77.490 C 246.753 77.816,246.641 78.447,246.589 78.890 C 246.537 79.334,246.418 79.842,246.323 80.019 C 246.229 80.196,246.193 80.408,246.244 80.490 C 246.295 80.572,246.223 80.753,246.085 80.891 C 245.947 81.030,245.833 81.261,245.833 81.405 C 245.833 81.549,245.777 81.667,245.707 81.667 C 245.638 81.667,245.489 81.876,245.376 82.131 C 245.061 82.843,242.331 85.833,241.996 85.833 C 241.935 85.833,241.667 86.023,241.401 86.254 C 239.602 87.818,237.030 87.991,235.333 86.661 C 234.794 86.239,233.503 84.167,233.778 84.167 C 233.845 84.167,233.810 84.077,233.700 83.967 C 233.590 83.857,233.500 83.599,233.500 83.393 C 233.500 83.188,233.425 82.973,233.333 82.917 C 233.242 82.860,233.167 82.598,233.167 82.334 C 233.167 82.071,233.098 81.675,233.015 81.455 C 232.931 81.235,232.818 80.772,232.763 80.425 C 232.707 80.078,232.632 79.745,232.595 79.685 C 232.558 79.625,232.482 79.278,232.427 78.913 C 232.371 78.548,232.221 77.802,232.093 77.254 C 231.965 76.707,231.885 76.218,231.915 76.169 C 231.946 76.120,232.016 75.593,232.071 74.998 C 232.127 74.403,232.221 73.617,232.280 73.250 C 232.339 72.883,232.399 72.318,232.412 71.994 C 232.425 71.670,232.487 71.323,232.549 71.222 C 232.611 71.121,232.706 70.749,232.758 70.394 C 232.868 69.662,233.620 66.546,233.779 66.167 C 233.889 65.904,233.954 65.691,234.071 65.208 C 234.109 65.048,234.156 64.898,234.175 64.875 C 234.193 64.852,234.224 64.777,234.244 64.708 C 234.264 64.640,234.412 64.283,234.573 63.917 C 234.733 63.550,234.978 62.987,235.116 62.667 C 235.625 61.485,235.740 61.245,235.902 61.025 C 235.994 60.901,236.082 60.712,236.097 60.604 C 236.234 59.674,238.950 56.258,240.417 55.171 C 241.184 54.602,241.490 54.439,242.917 53.835 C 243.921 53.411,245.665 53.326,247.333 53.621 " stroke="none" fill="#6c1c5c" fill-rule="evenodd"></path><path id="path2" d="M203.216 36.624 C 203.931 36.655,205.056 36.655,205.716 36.624 C 206.376 36.592,205.792 36.566,204.417 36.567 C 203.042 36.567,202.501 36.593,203.216 36.624 M272.375 50.123 C 272.902 50.156,273.765 50.156,274.292 50.123 C 274.819 50.090,274.387 50.063,273.333 50.063 C 272.279 50.063,271.848 50.090,272.375 50.123 " stroke="none" fill="#741c5c" fill-rule="evenodd"></path><path id="path3" d="M203.208 53.282 C 203.369 53.323,203.631 53.323,203.792 53.282 C 203.952 53.240,203.821 53.205,203.500 53.205 C 203.179 53.205,203.048 53.240,203.208 53.282 M55.542 67.282 C 55.702 67.323,55.965 67.323,56.125 67.282 C 56.285 67.240,56.154 67.205,55.833 67.205 C 55.512 67.205,55.381 67.240,55.542 67.282 M45.794 76.285 C 46.001 76.324,46.301 76.323,46.460 76.281 C 46.620 76.239,46.450 76.207,46.083 76.209 C 45.717 76.211,45.586 76.245,45.794 76.285 M48.958 80.118 C 49.165 80.157,49.502 80.157,49.708 80.118 C 49.915 80.078,49.746 80.045,49.333 80.045 C 48.921 80.045,48.752 80.078,48.958 80.118 M56.792 80.118 C 56.998 80.157,57.335 80.157,57.542 80.118 C 57.748 80.078,57.579 80.045,57.167 80.045 C 56.754 80.045,56.585 80.078,56.792 80.118 M118.634 83.624 C 119.578 83.654,121.078 83.654,121.967 83.624 C 122.856 83.594,122.083 83.570,120.250 83.570 C 118.417 83.570,117.689 83.595,118.634 83.624 " stroke="none" fill="#881c80" fill-rule="evenodd"></path><path id="path4" d="" stroke="none" fill="#741c70" fill-rule="evenodd"></path></g></svg>`;

// set :host styles to make playwright detect the element as visible
const template = /*html*/ `
<style>
:host {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 99999;
  --monospace: 'SFMono-Regular', Consolas,
  'Liberation Mono', Menlo, Courier, monospace;
  --red: #ff5555;
  --brand-color: #9f1a8f;
  --window-background: #ffffff;
  --window-color: #d8d8d8;
  --brand-color-o: rgba(248, 44, 224, 0.3);
}

.backdrop {
  position: fixed;
  z-index: 99999;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow-y: scroll;
  margin: 0;
  background: rgba(0, 0, 0, 0.56);
}

.window {
  font-family: var(--monospace);
  line-height: 1.5;
  width: 800px;
  color: var(--window-color);
  margin: 60px auto;
  position: relative;
  background: var(--window-background);
  border-radius: 6px 6px 8px 8px;
  box-shadow: 0 20px 34px rgba(0,0,0,0.40), 0 18px 16px rgba(0,0,0,0.30);
  overflow: hidden;
  border-top: 6px solid var(--red);
  direction: ltr;
  text-align: left;
}

pre {
  font-family: var(--monospace);
  font-size: 14px;
  margin-top: 0;
  margin-bottom: 1em;
  overflow-x: scroll;
  scrollbar-width: none;
}

pre::-webkit-scrollbar {
  display: none;
}

pre.frame::-webkit-scrollbar {
  display: block;
  height: 5px;
}

pre.frame::-webkit-scrollbar-thumb {
  background: #999;
  border-radius: 5px;
}

pre.frame {
  scrollbar-width: thin;
}

.message {
  max-height: 400px;
  padding: 25px 30px;
  line-height: 1.3;
  font-weight: 600;
  white-space: pre-wrap;
}

.message-body {
  color: var(--red);
}

code {
  font-size: 13px;
  font-family: var(--monospace);
  color: var(--yellow);
}

.footer {
  font-family: var(--monospace);
  background: rgba(0, 0, 0, 0.16);
  color: #000;
  padding: 10px 20px;
  border-radius: 0 0 6px 6px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.tip {
  font-size: 13px;
  line-height: 1.8;
}

kbd {
  line-height: 1.5;
  font-family: ui-monospace, Menlo, Monaco, Consolas, 'Liberation Mono',
    'Courier New', monospace;
  font-size: 0.75rem;
  font-weight: 700;
  background-color: rgb(38, 40, 44);
  color: rgb(166, 167, 171);
  padding: 0.15rem 0.3rem;
  border-radius: 0.25rem;
  border-width: 0.0625rem 0.0625rem 0.1875rem;
  border-style: solid;
  border-color: rgb(54, 57, 64);
  border-image: initial;
}

kbd {
  line-height: 1.5;
  font-family: ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 0.75rem;
  font-weight: 700;
  background-color: rgb(38, 40, 44);
  color: rgb(166, 167, 171);
  padding: 0.15rem 0.3rem;
  border-radius: 0.25rem;
  border-width: 0.0625rem 0.0625rem 0.1875rem;
  border-style: solid;
  border-color: rgb(54, 57, 64);
  border-image: initial;
}
</style>
<div class="backdrop" part="backdrop">
  <div class="window" part="window">
    <pre class="message" part="message"><span class="plugin" part="plugin"></span><span class="message-body" part="message-body"></span></pre>
    <div class="footer">
      <div class="tip" part="tip">
        Click outside, press <kbd>Esc</kbd> key, or fix the code to dismiss.<br />
      </div>
      ${brandSvg}
    </div>
  </div>
</div>
`;

const fileRE = /(?:[a-zA-Z]:\\|\/).*?:\d+:\d+/g;
const codeframeRE = /^(?:>?\s*\d+\s+\|.*|\s+\|\s*\^.*)\r?\n/gm;

// Allow `ErrorOverlay` to extend `HTMLElement` even in environments where
// `HTMLElement` was not originally defined.
const { HTMLElement = class {} as typeof globalThis.HTMLElement } = globalThis;
export class ErrorOverlay extends HTMLElement {
  root: ShadowRoot;
  closeOnEsc: (e: KeyboardEvent) => void;
  // TODO Optimize hmr boundaries and return values to match vite hmr mode socket return values
  constructor(err: any, links = true) {
    super();
    this.root = this.attachShadow({ mode: 'open' });
    this.root.innerHTML = template;

    codeframeRE.lastIndex = 0;
    const hasFrame = err.frame && codeframeRE.test(err.frame);
    const message = hasFrame
      ? err.message.replace(codeframeRE, '')
      : err.message;
    if (err.plugin) {
      this.text('.plugin', `[plugin:${err.plugin}] `);
    }
    this.text('.message-body', message);

    const [file] = (err.loc?.file || err.id || 'unknown file').split(`?`);
    if (err.loc) {
      this.text('.file', `${file}:${err.loc.line}:${err.loc.column}`, links);
    } else if (err.id) {
      this.text('.file', file);
    }

    if (hasFrame) {
      this.text('.frame', err.frame?.trim());
    }
    this.text('.stack', err.stack, links);

    this.root.querySelector('.window')?.addEventListener('click', (e) => {
      e.stopPropagation();
    });

    this.addEventListener('click', () => {
      this.close();
    });

    this.closeOnEsc = (e: KeyboardEvent) => {
      if (e.key === 'Escape' || e.code === 'Escape') {
        this.close();
      }
    };

    document.addEventListener('keydown', this.closeOnEsc);
  }

  text(selector: string, text: string, linkFiles = false): void {
    const el = this.root.querySelector(selector)!;
    if (!linkFiles) {
      el.textContent = text;
    } else {
      let curIndex = 0;
      let match: RegExpExecArray | null;
      fileRE.lastIndex = 0;
      while ((match = fileRE.exec(text))) {
        const { 0: file, index } = match;
        if (index != null) {
          const frag = text.slice(curIndex, index);
          el.appendChild(document.createTextNode(frag));
          const link = document.createElement('a');
          link.textContent = file;
          link.className = 'file-link';
          link.onclick = () => {
            fetch(
              new URL(
                `${base}__open-in-editor?file=${encodeURIComponent(file)}`,
                // import.meta.url
                window.location.href
              )
            );
          };
          el.appendChild(link);
          curIndex += frag.length + file.length;
        }
      }
    }
  }
  close(): void {
    this.parentNode?.removeChild(this);
    document.removeEventListener('keydown', this.closeOnEsc);
  }
}

export const overlayId = 'vite-error-overlay';
const { customElements } = globalThis; // Ensure `customElements` is defined before the next line.
if (customElements && !customElements.get(overlayId)) {
  customElements.define(overlayId, ErrorOverlay);
}
